migration-process.txt
Created Tue Jan 26 13:34:34 AKST 2016
Copyright (C) 2016 by Raymond E. Marcil <marcilr@gmail.com>


Migration process for subversion to git


1. Install subversion, subversion-tools, and packages as needed:
# aptitude update
# aptitude upgrade
# aptitude install subversion
# aptitude install subversion-tools
# aptitude install git
# aptitude install git-extras
# aptitude install git-svn

2. Checkout repo to covert (to bornite it this example):
$ mkdir -p ~/svn
$ cd ~/svn
$ svn co svn+ssh://htpc/data/svnroot/software/software
A    software/README
A    software/links.txt
A    software/svn_ext_val.txt
A    software/software.txt
...
Checked out revision 15.

Fetching external item into 'software/window-manager/xorg/syntax':
A    software/window-manager/xorg/syntax/syntax.txt
A    software/window-manager/xorg/syntax/xserver.txt
A    software/window-manager/xorg/syntax/README
Checked out external at revision 3.

Checked out revision 5.
Checked out revision 10.
Checked out revision 9.
$


3. Create a file called users.txt that has this mapping in a format like this:
chacon = Scott Chacon <schacon@geemail.com>
selse = Someo Nelse <selse@geemail.com>

Extract list of authors that svn users:
$ cd ~/svn/software
$ svn log --xml | grep author | sort -u | \
  perl -pe 's/.*&gt;(.*?)&lt;.*/$1 = /' > users.txt
$

$ cat users.txt
<author>marcilr</author>

Clean up generated users.txt:
$ sed -i 's:<author>marcilr</author>:\
marcilr = Raymond Marcil <marcilr@gmail.com>:g' users.txt

$ cat users.txt
marcilr = Raymond Marcil <marcilr@gmail.com>

Looks good.  Granted very short user list.

4. Convert subversion repo to git using 'gti svn':
$ git svn clone svn+ssh://marcilr@htpc/data/svnroot/software/software/ \
--authors-file=users.txt --no-metadata my_project

Options:
  --authors-file     If this option is specified and git svn encounters an
                     SVN committer name that does not exist in the authors-file,
                     git svn will abort operation.  The user will then have to
                     add the appropriate entry.  Re-running the previous git
                     svn command after the authors-file is modified should
                     continue operation.
                     -- git-scm.com/docs/git-svn/1.7.7.2

  --no-metadata      Set the noMetadata option in the [svn-remote] config.
                     This option is not recommended, please read the
                     svn.noMetadata section of this manpage before using
                     this option.
                     -- man git svn


-- git-scm.com/book/en/v2/Git-and-Other-Systems-Migrating-to-Git


Links
=====
9.2 Git and Other Systems - Migrating to Git
Git Pro, 2nd Edition (2014)
https://git-scm.com/book/en/v2/Git-and-Other-Systems-Migrating-to-Git

git-svn(1) Manual Page
git-svn - Bidirectional operation between a Subversion repository and git
git --local-branching-on-the-cheap
https://git-scm.com/docs/git-svn/1.7.7.2
